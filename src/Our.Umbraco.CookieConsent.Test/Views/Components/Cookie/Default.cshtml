@using Our.Umbraco.CookieConsent.Extensions
@using Our.Umbraco.CookieConsent.Interfaces
@using Our.Umbraco.CookieConsent.Models
@using Umbraco.Cms.Web.Common
@inject ICookieConsentService CookieConsentService
@inject UmbracoHelper UmbracoHelper
@{
    CookieConsentSettingsModel cookieSettings = CookieConsentService.GetSettings();

}
@if (cookieSettings is not null)
{
    <link rel="stylesheet" href="/libraries/cookieconsent-orestbida/cookieconsent.min.css" />
    <script src="/libraries/cookieconsent-orestbida/cookieconsent.umd.min.js"></script>
    <script>
        window.addEventListener('load', () => {
            CookieConsent.run({
                current_lang: 'en',
                autoclear_cookies: true,
                cookie_name: 'cookieconsent',
                cookie_expiration: 31,
                guiOptions: {
                    consentModal: {
                        layout: "@cookieSettings?.GuiOptions.ConsentModalLayout.GetDisplayName()",
                        position: "@cookieSettings?.GuiOptions.ConsentModalPosition.GetDisplayName()",
                        equalWeightButtons: true,
                        flipButtons: false,
                        transition: 'slide'
                    },
                    preferencesModal: {
                        layout: "@cookieSettings?.GuiOptions.PreferencesModalLayout.GetDisplayName()",
                        position: "@cookieSettings?.GuiOptions.PreferencesModalPosition.GetDisplayName()",
                        equalWeightButtons: true,
                        flipButtons: false,
                        sections: [
                            {
                                title: "Performance and analysis cookies",
                                description: "These cookies allow the website to remember the choices you have made in the past.",
                                linkedCategory: "analytics"
                            },
                            {
                                title: "Strictly necessary cookies",
                                description: "These cookies are essential for the proper functioning of my website. Without these cookies, the site would not function properly.",
                                linkedCategory: "necessary"
                            },
                            {
                                title: "More information",
                                description: "If you have any questions about our cookie policy and your choices, please contact us.",
                                linkedCategory: "unclassified"
                            },
                        ]
                    }
                },
                categories: {
                    necessary: {
                        readOnly: true
                    },
                    functionality: {
                        enabled: true,
                    },
                    analytics: {
                        enabled: true,
                    },
                },
                language: {
                    default: "en",
                    translations: {
                        "en": {
                            consentModal: {
                                title: "@UmbracoHelper.GetDictionaryValue(Translations.ConsentModal.Title)",
                                description: "@UmbracoHelper.GetDictionaryValue(Translations.ConsentModal.Description)",
                                acceptAllBtn: "@UmbracoHelper.GetDictionaryValue(Translations.ConsentModal.AcceptAll)",
                                rejectAllBtn: "@UmbracoHelper.GetDictionaryValue(Translations.ConsentModal.RejectAll)",
                                showPreferencesBtn: "@UmbracoHelper.GetDictionaryValue(Translations.ConsentModal.ManagePreferences)",
                                footer: "@UmbracoHelper.GetDictionaryValue(Translations.ConsentModal.Footer)"
                            },
                            preferencesModal: {
                                title: "@UmbracoHelper.GetDictionaryValue(Translations.PreferencesModal.Title)",
                                acceptAllBtn: "@UmbracoHelper.GetDictionaryValue(Translations.PreferencesModal.AcceptAll)",
                                rejectAllBtn: "@UmbracoHelper.GetDictionaryValue(Translations.PreferencesModal.RejectAll)",
                                savePreferencesBtn: "@UmbracoHelper.GetDictionaryValue(Translations.PreferencesModal.Save)",
                                closeIconLabel: "@UmbracoHelper.GetDictionaryValue(Translations.PreferencesModal.CloseIconLabel)",
                                serviceCounterLabel: "@UmbracoHelper.GetDictionaryValue(Translations.PreferencesModal.ServiceCounterLabel)",
                            }
                        }
                    }
                }
            });
        });
    </script>
}